# Granian benchmarks



## Concurrency

Run at: Fri 07 Jun 2024, 14:12    
Environment: Apple Silicon M2 Pro (CPUs: 10)    
Python version: 3.11    
Granian version: 1.4.1    

### ASGI

| Mode | Processes | Threads | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- | --- | --- |
| **workers (c128)** | **1** | **1** | **1050668** | **105078** | **1.217ms** | **6.862ms** |
| **runtime (c128)** | **1** | **1** | **1059261** | **105966** | **1.207ms** | **34.651ms** |
| workers (c512) | 1 | 2 | 931408 | 93199 | 5.482ms | 79.694ms |
| runtime (c1024) | 1 | 2 | 974218 | 97529 | 10.473ms | 284.371ms |
| workers (c128) | 1 | 4 | 885814 | 88600 | 1.443ms | 21.44ms |
| runtime (c1024) | 1 | 4 | 984314 | 98539 | 10.364ms | 184.892ms |
| workers (c128) | 2 | 1 | 1035291 | 103552 | 1.235ms | 34.918ms |
| runtime (c128) | 2 | 1 | 982200 | 98238 | 1.302ms | 32.805ms |
| workers (c1024) | 2 | 2 | 995758 | 99683 | 10.243ms | 181.838ms |
| runtime (c1024) | 2 | 2 | 974029 | 97505 | 10.476ms | 207.503ms |
| workers (c1024) | 2 | 4 | 997668 | 99891 | 10.226ms | 290.405ms |
| runtime (c1024) | 2 | 4 | 973008 | 97442 | 10.486ms | 271.711ms |
| workers (c1024) | 4 | 1 | 988921 | 98992 | 10.318ms | 205.151ms |
| runtime (c1024) | 4 | 1 | 973490 | 97456 | 10.475ms | 212.923ms |
| workers (c1024) | 4 | 2 | 953177 | 95401 | 10.707ms | 180.152ms |
| runtime (c1024) | 4 | 2 | 962894 | 96381 | 10.6ms | 180.343ms |
| workers (c1024) | 4 | 4 | 909077 | 91001 | 11.226ms | 332.815ms |
| runtime (c1024) | 4 | 4 | 944416 | 94547 | 10.804ms | 182.145ms |
| workers (c1024) | 5 | 1 | 978625 | 97970 | 10.422ms | 196.911ms |
| runtime (c1024) | 5 | 1 | 970026 | 97107 | 10.519ms | 278.867ms |
| workers (c1024) | 5 | 2 | 938633 | 93962 | 10.869ms | 184.845ms |
| runtime (c1024) | 5 | 2 | 947607 | 94862 | 10.764ms | 181.334ms |
| workers (c1024) | 5 | 4 | 875783 | 87667 | 11.647ms | 191.256ms |
| runtime (c1024) | 5 | 4 | 916787 | 91799 | 11.131ms | 223.333ms |
| workers (c1024) | 10 | 1 | 926439 | 92733 | 11.016ms | 179.672ms |
| runtime (c1024) | 10 | 1 | 919365 | 92045 | 11.099ms | 197.957ms |
| workers (c1024) | 10 | 2 | 906293 | 90725 | 11.257ms | 308.576ms |
| runtime (c1024) | 10 | 2 | 914046 | 91500 | 11.163ms | 206.599ms |
| workers (c128) | 10 | 4 | 866795 | 86694 | 1.475ms | 44.221ms |
| runtime (c1024) | 10 | 4 | 902783 | 90370 | 11.305ms | 187.333ms |

### RSGI

| Mode | Processes | Threads | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- | --- | --- |
| workers (c128) | 1 | 1 | 1046433 | 104688 | 1.221ms | 30.449ms |
| runtime (c1024) | 1 | 1 | 1034622 | 103590 | 9.861ms | 198.131ms |
| **workers (c128)** | **1** | **2** | **1122644** | **112284** | **1.139ms** | **10.314ms** |
| runtime (c1024) | 1 | 2 | 953312 | 95429 | 10.706ms | 328.389ms |
| workers (c128) | 1 | 4 | 1020431 | 102062 | 1.253ms | 30.568ms |
| **runtime (c128)** | **1** | **4** | **1065167** | **106550** | **1.2ms** | **34.51ms** |
| workers (c128) | 2 | 1 | 1034458 | 103468 | 1.236ms | 34.823ms |
| runtime (c1024) | 2 | 1 | 968519 | 96959 | 10.538ms | 258.834ms |
| workers (c128) | 2 | 2 | 1003910 | 100419 | 1.273ms | 33.14ms |
| runtime (c128) | 2 | 2 | 1060987 | 106136 | 1.205ms | 33.242ms |
| workers (c128) | 2 | 4 | 960160 | 96037 | 1.332ms | 31.251ms |
| runtime (c128) | 2 | 4 | 979234 | 97963 | 1.305ms | 35.688ms |
| workers (c512) | 4 | 1 | 988444 | 98926 | 5.163ms | 117.592ms |
| runtime (c1024) | 4 | 1 | 969192 | 97015 | 10.53ms | 183.152ms |
| workers (c1024) | 4 | 2 | 947994 | 94899 | 10.765ms | 211.241ms |
| runtime (c1024) | 4 | 2 | 939710 | 94056 | 10.861ms | 218.675ms |
| workers (c1024) | 4 | 4 | 882816 | 88376 | 11.558ms | 214.51ms |
| runtime (c1024) | 4 | 4 | 939572 | 94058 | 10.861ms | 223.576ms |
| workers (c1024) | 5 | 1 | 944524 | 94562 | 10.805ms | 241.203ms |
| runtime (c1024) | 5 | 1 | 957556 | 95865 | 10.658ms | 182.441ms |
| workers (c1024) | 5 | 2 | 896521 | 89746 | 11.376ms | 265.772ms |
| runtime (c1024) | 5 | 2 | 932324 | 93331 | 10.942ms | 294.87ms |
| workers (c1024) | 5 | 4 | 872279 | 87302 | 11.699ms | 210.52ms |
| runtime (c1024) | 5 | 4 | 922291 | 92329 | 11.06ms | 181.908ms |
| workers (c1024) | 10 | 1 | 919098 | 92023 | 11.104ms | 180.702ms |
| runtime (c1024) | 10 | 1 | 896426 | 89729 | 11.385ms | 180.143ms |
| workers (c128) | 10 | 2 | 891912 | 89206 | 1.434ms | 52.554ms |
| runtime (c1024) | 10 | 2 | 912838 | 91376 | 11.181ms | 288.993ms |
| workers (c1024) | 10 | 4 | 858376 | 85911 | 11.886ms | 211.222ms |
| runtime (c128) | 10 | 4 | 849088 | 84928 | 1.506ms | 33.338ms |

### WSGI

| Mode | Processes | Threads | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- | --- | --- |
| workers (c128) | 1 | 1 | 943815 | 94406 | 1.355ms | 9.98ms |
| runtime (c128) | 1 | 1 | 938252 | 93834 | 1.363ms | 8.254ms |
| workers (c128) | 1 | 2 | 855088 | 85522 | 1.496ms | 6.011ms |
| **runtime (c1024)** | **1** | **2** | **993484** | **99461** | **10.271ms** | **238.027ms** |
| workers (c128) | 1 | 4 | 760963 | 76127 | 1.679ms | 43.832ms |
| runtime (c1024) | 1 | 4 | 952628 | 95366 | 10.714ms | 472.095ms |
| workers (c1024) | 2 | 1 | 979728 | 98089 | 10.42ms | 261.429ms |
| runtime (c1024) | 2 | 1 | 964088 | 96534 | 10.58ms | 288.456ms |
| workers (c1024) | 2 | 2 | 977624 | 97864 | 10.44ms | 274.07ms |
| runtime (c1024) | 2 | 2 | 969472 | 97050 | 10.526ms | 281.727ms |
| workers (c128) | 2 | 4 | 922326 | 92256 | 1.386ms | 53.9ms |
| runtime (c1024) | 2 | 4 | 959925 | 96117 | 10.629ms | 258.251ms |
| workers (c1024) | 4 | 1 | 971804 | 97277 | 10.503ms | 234.72ms |
| runtime (c1024) | 4 | 1 | 969141 | 97017 | 10.528ms | 231.043ms |
| workers (c1024) | 4 | 2 | 973846 | 97467 | 10.482ms | 185.302ms |
| runtime (c1024) | 4 | 2 | 979918 | 98074 | 10.417ms | 249.058ms |
| workers (c1024) | 4 | 4 | 945698 | 94650 | 10.793ms | 211.708ms |
| runtime (c1024) | 4 | 4 | 977542 | 97859 | 10.439ms | 259.169ms |
| **workers (c1024)** | **5** | **1** | **986040** | **98695** | **10.351ms** | **270.156ms** |
| runtime (c1024) | 5 | 1 | 979005 | 97989 | 10.427ms | 185.067ms |
| workers (c1024) | 5 | 2 | 984237 | 98519 | 10.369ms | 327.094ms |
| runtime (c1024) | 5 | 2 | 968733 | 96972 | 10.533ms | 211.641ms |
| workers (c1024) | 5 | 4 | 962076 | 96280 | 10.606ms | 288.121ms |
| runtime (c128) | 5 | 4 | 921475 | 92171 | 1.387ms | 36.991ms |
| workers (c1024) | 10 | 1 | 971101 | 97202 | 10.509ms | 300.499ms |
| runtime (c1024) | 10 | 1 | 968823 | 96979 | 10.533ms | 209.763ms |
| workers (c1024) | 10 | 2 | 942261 | 94299 | 10.833ms | 188.566ms |
| runtime (c1024) | 10 | 2 | 952658 | 95356 | 10.712ms | 226.61ms |
| workers (c1024) | 10 | 4 | 925236 | 92609 | 11.024ms | 330.086ms |
| runtime (c1024) | 10 | 4 | 948651 | 94977 | 10.754ms | 218.555ms |

